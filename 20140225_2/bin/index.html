<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>HTC</title>
	<meta name="description" content="" />
	<script src="js/lib/jquery/jquery-1.9.min.js"></script>
	<script src="js/lib/underscore/underscore.js"></script>
	<script src="js/lib/backbone/backbone.js"></script>
	<script src="js/swfobject.js"></script>
	<script>
		var flashvars = {
		};
		var params = {
			menu: "false",
			scale: "noScale",
			allowFullscreen: "true",
			allowScriptAccess: "always",
			bgcolor: "",
			wmode: "direct" // can cause issues with FP settings & webcam
		};
		var attributes = {
			id:"HTC"
		};
		swfobject.embedSWF(
			"HTC.swf", 
			"altContent", "100%", "100%", "10.0.0", 
			"expressInstall.swf", 
			flashvars, params, attributes);
	</script>
	<style>
		html, body { height:100%; overflow:hidden; }
		body { margin:0; }
	</style>
</head>
<body>
	<div id="altContent">
		<h1>HTC</h1>
		<p><a href="http://www.adobe.com/go/getflashplayer">Get Adobe Flash player</a></p>
	</div>
	<script>
	var Router = Backbone.Router.extend({
		routes:{
			index:'index',
			tech:'tech'
		},
		index:function(){
			callFlashMethod( 'router', 'index' );
			console.log( 'index' );
		},
		tech:function(){
			callFlashMethod( 'router', 'tech' );
			console.log( 'tech' );
		}
	})
	
	var router = new Router();
	function flashReady(){
		console.log( 'flashReady' );
		Backbone.history.start();
	}
	
	function thisMovie(movieName) 
	{
		if (navigator.appName.indexOf("Microsoft") != -1) 
		{
			return window[movieName];
		} 
		else 
		{
			return document[movieName];
		}
	}
	
	function callFlashMethod( methodName, val )
	{
		//thisMovie("HTC").jsCallFlash( 'jshaha' );
		console.log( thisMovie("HTC") );
		console.log( thisMovie("HTC")[ methodName ] );
		thisMovie("HTC")[ methodName ]( val );
	}
	
	function flashCallJs( val ){
		console.log( 'from flash: ' + val );
		callFlashMethod();
	}
	</script>
</body>
</html>